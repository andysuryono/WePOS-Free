/**
 * Filename: inventory.kartuStokItem.js
 * Generated 2019-03-07 at 01:40:59 AM
 */
Ext.define('ExtApp.modules.master_pos.model.model_masterItem',{extend:'Ext.data.Model',alias:'model_masterItem',fields:[{name:'id',type:'int'},{name:'item_code',type:'string'},{name:'item_sku',type:'string'},{name:'item_name',type:'string'},{name:'item_code_name',type:'string'},{name:'item_name_code',type:'string'},{name:'item_desc',type:'string'},{name:'item_manufacturer',type:'string'},{name:'sales_price',type:'string'},{name:'sales_price_show',type:'string'},{name:'item_price',type:'string'},{name:'item_price_show',type:'string'},{name:'item_hpp',type:'string'},{name:'item_hpp_show',type:'string'},{name:'last_in',type:'string'},{name:'last_in_show',type:'string'},{name:'total_qty_stok',type:'string'},{name:'item_type',type:'string'},{name:'item_type_name',type:'string'},{name:'item_image',type:'string'},{name:'item_image_show',type:'string'},{name:'item_image_src',type:'string'},{name:'category_id',type:'int'},{name:'item_category_name',type:'string'},{name:'item_category_code',type:'string'},{name:'subcategory_id',type:'int'},{name:'item_subcategory_name',type:'string'},{name:'item_subcategory_code',type:'string'},{name:'unit_id',type:'int'},{name:'unit_name',type:'string'},{name:'unit_code',type:'string'},{name:'supplier_id',type:'int'},{name:'supplier_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'use_for_sales',type:'int'},{name:'use_for_sales_text',type:'string'},{name:'id_ref_menu',type:'int'},{name:'sales_use_tax',type:'int'},{name:'sales_use_tax_text',type:'string'},{name:'sales_use_service',type:'int'},{name:'sales_use_service_text',type:'string'},{name:'is_kerjasama',type:'int'},{name:'is_kerjasama_text',type:'string'},{name:'persentase_bagi_hasil',type:'string'},{name:'total_bagi_hasil',type:'string'},{name:'total_bagi_hasil',type:'string'},{name:'total_bagi_hasil_show',type:'string'},{name:'use_stok_kode_unik',type:'int'},{name:'use_stok_kode_unik_text',type:'string'},{name:'min_stock',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterItem/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterStoreHouse',{extend:'Ext.data.Model',alias:'model_masterStoreHouse',fields:[{name:'id',type:'int'},{name:'storehouse_code',type:'string'},{name:'storehouse_name',type:'string'},{name:'storehouse_desc',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'is_primary',type:'int'},{name:'is_primary_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterStoreHouse/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_masterItem',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterItem',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterStoreHouse',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterStoreHouse',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.inventory.store.store_accPeriodeInventory',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"01","name":"Januari"},{"val":"02","name":"Februari"},{"val":"03","name":"Maret"},{"val":"04","name":"April"},{"val":"05","name":"Mei"},{"val":"06","name":"Juni"},{"val":"07","name":"Juli"},{"val":"08","name":"Agustus"},{"val":"09","name":"September"},{"val":"10","name":"Oktober"},{"val":"11","name":"November"},{"val":"12","name":"Desember"}],autoLoad:false});Ext.define("ExtApp.modules.inventory.view.kartuStokItem",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var v_this=this;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var store_accPeriodeInventory_Combobox=theApp.getStore('store_accPeriodeInventory_Combobox',false);if(store_accPeriodeInventory_Combobox==false){store_accPeriodeInventory_Combobox=theApp.copyStore('inventory','store_accPeriodeInventory','store_accPeriodeInventory_Combobox');}
var store_ComboboxMasterItem_kartuStokItem=theApp.getStore('store_ComboboxMasterItem_kartuStokItem',false);if(store_ComboboxMasterItem_kartuStokItem==false){store_ComboboxMasterItem_kartuStokItem=theApp.copyStore('master_pos','store_masterItem','store_ComboboxMasterItem_kartuStokItem');}
store_ComboboxMasterItem_kartuStokItem.proxy.extraParams.limit=999999;store_ComboboxMasterItem_kartuStokItem.proxy.extraParams.is_dropdown=1;store_ComboboxMasterItem_kartuStokItem.proxy.extraParams.is_active=1;store_ComboboxMasterItem_kartuStokItem.proxy.extraParams.show_all_text=0;store_ComboboxMasterItem_kartuStokItem.proxy.extraParams.show_choose_text=1;var store_ComboboxMasterStoreHouse_kartuStokItem=theApp.getStore('store_ComboboxMasterStoreHouse_kartuStokItem',false);if(store_ComboboxMasterStoreHouse_kartuStokItem==false){store_ComboboxMasterStoreHouse_kartuStokItem=theApp.copyStore('master_pos','store_masterStoreHouse','store_ComboboxMasterStoreHouse_kartuStokItem');}
store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.limit=999999;store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.is_dropdown=1;store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.except_primary=1;store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.is_active=1;store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.show_all_text=0;store_ComboboxMasterStoreHouse_kartuStokItem.proxy.extraParams.show_choose_text=1;var add_parameter='_dc='+phpJs.mktime();add_parameter+='&month='+phpJs.date("m");add_parameter+='&year='+phpJs.date("Y");var url_report=appUrl+'inventory/kartuStokItem/print_kartuStokItem?'+add_parameter;return desktop.createWindow({id:me.id,title:'Kartu Stok Per-Item',width:1200,height:600,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,border:0,layout:{type:'fit'},items:[{xtype:"panel",layout:'fit',width:1200,height:500,border:false,items:[{xtype:"component",id:'print_area_kartuStokItem',autoEl:{tag:"iframe",src:url_report},border:false}],dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'combobox',name:'item_name_code',id:'src_item_name_code_kartuStokItem',fieldLabel:'',emptyText:'Pilih Item',labelWidth:0,width:300,store:store_ComboboxMasterItem_kartuStokItem,displayField:'item_name_code',valueField:'id',queryMode:'local',anyMatch:true,allowBlank:false,listeners:{select:function(combo,records,eOpts){}}},'-',{xtype:'combobox',name:'storehouse_id',id:'src_storehouse_id_kartuStokItem',fieldLabel:'',emptyText:'Pilih Gudang',labelWidth:0,width:200,store:store_ComboboxMasterStoreHouse_kartuStokItem,displayField:'storehouse_name',valueField:'id',queryMode:'local',allowBlank:false,listeners:{select:function(combo,records,eOpts){}}},'-',{xtype:'combobox',fieldLabel:'Bulan',labelSeparator:'',width:160,margin:'5 10 0 0',labelWidth:45,name:'src_bulan_kartuStokItem',id:'src_bulan_kartuStokItem',fieldLabel:'Bulan',store:store_accPeriodeInventory_Combobox,queryMode:'local',hiddenName:"val",displayField:'name',valueField:'val',typeAhead:true,minChars:1,forceSelection:true,allowBlank:false,pageSize:0},{xtype:'numberfield',fieldLabel:' Tahun ',name:'src_tahun_kartuStokItem',id:'src_tahun_kartuStokItem',width:130,labelWidth:45,labelSeparator:'',minValue:2013,value:phpJs.date('Y'),allowBlank:false},'-',{xtype:'button',text:'Search',scale:'medium',margin:'15 10 0 0',itemId:'btnSearch_kartuStokItem',tooltip:'Search',iconCls:'btn-search',handler:function(){me.print_kartuStokItem(0);}},{xtype:'button',text:'Print',scale:'medium',margin:'15 0 0 0',itemId:'btnPrint_kartuStokItem',tooltip:'Print',iconCls:'btn-print',handler:function(){me.print_kartuStokItem(1);}},'-',{xtype:'button',text:'Excel',scale:'medium',margin:'15 0 0 0',itemId:'btnExcel_kartuStokItem',tooltip:'Export to Excel',iconCls:'btn-excel',handler:function(){me.print_kartuStokItem(2);}}]},{xtype:'toolbar',dock:'bottom',items:['->',{text:'CLOSE',textAlign:'center',iconCls:'btn-cancel',listeners:{click:function(){me.doClose(me.id);}}}]}]}],listeners:{boxready:function(){Ext.getCmp("src_bulan_kartuStokItem").select(phpJs.date('m'));store_ComboboxMasterItem_kartuStokItem.load();store_ComboboxMasterStoreHouse_kartuStokItem.load();}}});}});