/**
 * Filename: monitoring.generateProductPrice.js
 * Generated 2019-03-07 at 01:43:27 AM
 */
Ext.define('ExtApp.modules.master_pos.model.model_productCategory',{extend:'Ext.data.Model',alias:'model_productCategory',fields:[{name:'id',type:'int'},{name:'parent_id',type:'int'},{name:'product_category_name',type:'string'},{name:'product_category_code',type:'string'},{name:'product_category_desc',type:'string'},{name:'product_category_code_name',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/productCategory/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.monitoring.model.model_generateProductPrice',{extend:'Ext.data.Model',alias:'model_generateProductPrice',fields:[{name:'id',type:'int'},{name:'product_name',type:'string'},{name:'product_group',type:'string'},{name:'product_category_id',type:'string'},{name:'product_category_name',type:'string'},{name:'normal_hpp',type:'string'},{name:'normal_price',type:'string'},{name:'normal_profit',type:'string'},{name:'current_hpp',type:'string'},{name:'current_price',type:'string'},{name:'current_profit',type:'string'},{name:'simulation_hpp',type:'string'},{name:'simulation_price',type:'string'},{name:'simulation_profit',type:'string'}],proxy:{type:'ajax',url:appUrl+'monitoring/generateProductPrice/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_productCategory',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_productCategory',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.monitoring.store.store_generateProductPrice',{extend:'Ext.data.Store',model:'ExtApp.modules.monitoring.model.model_generateProductPrice',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.monitoring.view.generateProductPrice",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();me.store_generateProductPrice_grid=theApp.getStore('store_generateProductPrice_grid',false);if(me.store_generateProductPrice_grid==false){me.store_generateProductPrice_grid=theApp.copyStore('monitoring','store_generateProductPrice','store_generateProductPrice_grid');}
me.store_generateProductPrice_grid.proxy.extraParams.limit=9999999;me.store_generateProductPrice_grid.proxy.extraParams.is_searching=0;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var selModel_generateProductPrice=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){}}});var add_parameter='_dc='+phpJs.mktime();var url_report=appUrl+'monitoring/generateProductPrice/print_generateProductPrice?'+add_parameter;return desktop.createWindow({id:me.id,title:'Generate Product Price',width:850,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:false,border:0,layout:{type:'border'},items:[{xtype:'form',title:'Generate Options',width:330,region:'west',id:'form_generateProductPrice',split:true,collapsible:true,splitterResize:false,collapseMode:'mini',animCollapse:true,scroll:false,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'textfield',name:'up_percentage',fieldLabel:'Up Price To %',labelWidth:100,labelSeparator:'',emptyText:'0 - 100',anchor:'70%',margin:'0 0 15 0'},{xtype:'checkbox',name:'use_current_price',fieldLabel:'Use Current Price?',inputValue:'1'},{xtype:'checkbox',name:'use_rounded',fieldLabel:'Use Rounded Price?',inputValue:'1',checked:true},{xtype:'textfield',name:'product_group',fieldLabel:'Product Group',labelWidth:100,labelSeparator:'',emptyText:'all, food, beverage, other',anchor:'100%',margin:'0 0 15 0'},,{xtype:'textfield',name:'except_category_id',fieldLabel:'Except Category ID',labelWidth:100,labelSeparator:'',emptyText:'insert ID category',anchor:'100%',margin:'0 0 15 0'},{xtype:'container',style:'text-align:center',border:0,items:[{xtype:'button',text:'Do Simulation',scale:'medium',margin:'15 0 0 0',itemId:'btnFilterSimulation_generateProductPrice',tooltip:'Do Simulation',iconCls:'btn-search',handler:function(){me.search_generateProductPrice(1);}},{xtype:'button',text:'Generate Price',scale:'medium',margin:'15 0 0 10',itemId:'btnFilterGenerate_generateProductPrice',tooltip:'Reset',iconCls:'btn-save',handler:function(){me.search_generateProductPrice(2);}}]},{xtype:'container',style:'text-align:center',border:0,items:[{xtype:'button',text:'Reset to Normal Price',scale:'medium',margin:'15 0 0 10',itemId:'btnFilterReset_generateProductPrice',tooltip:'Reset',iconCls:'btn-reset',handler:function(){var form=Ext.getCmp('form_generateProductPrice').getForm();var use_rounded=form.findField('use_rounded').getSubmitValue();form.reset();form.findField('use_rounded').setValue(use_rounded);me.search_generateProductPrice(3);}}]},{xtype:'container',style:'text-align:center',border:0,items:[{xtype:'button',text:'Print',scale:'medium',margin:'15 0 0 0',itemId:'btnFilterPrint_generateProductPrice',tooltip:'Print',iconCls:'btn-print',handler:function(){me.print_generateProductPrice(1);}},{xtype:'button',text:'Export',scale:'medium',margin:'15 0 0 10',itemId:'btnFilterGenerate_generateProductPrice',tooltip:'Export Excel',iconCls:'btn-excel',handler:function(){me.print_generateProductPrice(2);}}]},{xtype:"component",id:'print_area_generateProductPrice',autoEl:{tag:"iframe",src:url_report},border:false,hidden:true}]},{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:me.store_generateProductPrice_grid,id:'grid_generateProductPrice',scroll:true,selModel:selModel_generateProductPrice,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',width:150,dataIndex:'product_name',text:'Product Name',sortable:true},{xtype:'gridcolumn',width:100,dataIndex:'product_group',text:'Group',align:'left',sortable:true},{xtype:'gridcolumn',width:60,dataIndex:'product_category_id',text:'Cat.ID',align:'center',sortable:true},{xtype:'gridcolumn',width:150,dataIndex:'product_category_name',text:'Cat.Name',align:'left',sortable:true},{text:'Normal Price',columns:[{text:'HPP',width:100,sortable:true,dataIndex:'normal_hpp',align:'right'},{text:'Price',width:100,sortable:true,dataIndex:'normal_price',align:'right'},{text:'Profit',width:100,sortable:true,dataIndex:'normal_profit',align:'right'}],align:'right'},{text:'Current Price',columns:[{text:'HPP',width:100,sortable:true,dataIndex:'current_hpp',align:'right'},{text:'Price',width:100,sortable:true,dataIndex:'current_price',align:'right'},{text:'Profit',width:100,sortable:true,dataIndex:'current_profit',align:'right'}],align:'right'},{text:'Simulation Result',columns:[{text:'HPP',width:100,sortable:true,dataIndex:'simulation_hpp',align:'right'},{text:'Price',width:100,sortable:true,dataIndex:'simulation_price',align:'right'},{text:'Profit',width:100,sortable:true,dataIndex:'simulation_profit',align:'right'}],align:'right'}],viewConfig:{stripeRows:true,forceFit:true},dockedItems:[{xtype:'toolbar',dock:'top',items:[{text:'Generate & Simulation',itemId:'filterButton_generateProductPrice',tooltip:'Generate & Simulation Product Price',iconCls:'btn-search',listeners:{click:function(){Ext.getCmp('form_generateProductPrice').toggleCollapse();}}},'->',{text:'Refresh',itemId:'refreshButton_generateProductPrice',tooltip:'Refresh Product Price',iconCls:'btn-search',listeners:{click:function(){me.search_generateProductPrice();}}}]}]}],listeners:{boxready:function(){Ext.getCmp('form_generateProductPrice').toggleCollapse();me.store_generateProductPrice_grid.load();},show:function(){}}});}});