/**
 * Filename: inventory.hasilProduksi.js
 * Generated 2019-03-07 at 01:39:08 AM
 */
Ext.define('ExtApp.modules.master_pos.model.model_masterItemDistribution',{extend:'Ext.data.Model',alias:'model_masterItemDistribution',fields:[{name:'id',type:'int'},{name:'item_code',type:'string'},{name:'item_name',type:'string'},{name:'item_code_name',type:'string'},{name:'sales_price',type:'string'},{name:'sales_price_show',type:'string'},{name:'item_price',type:'string'},{name:'item_price_show',type:'string'},{name:'item_hpp',type:'string'},{name:'item_hpp_show',type:'string'},{name:'unit_id',type:'int'},{name:'unit_name',type:'string'},{name:'last_in_item',type:'string'},{name:'use_stok_kode_unik',type:'int'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterItem/gridDataDistribution',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterUnit',{extend:'Ext.data.Model',alias:'model_masterUnit',fields:[{name:'id',type:'int'},{name:'unit_name',type:'string'},{name:'unit_code',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterUnit/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterStoreHouse',{extend:'Ext.data.Model',alias:'model_masterStoreHouse',fields:[{name:'id',type:'int'},{name:'storehouse_code',type:'string'},{name:'storehouse_name',type:'string'},{name:'storehouse_desc',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'is_primary',type:'int'},{name:'is_primary_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterStoreHouse/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.inventory.model.model_hasilProduksi',{extend:'Ext.data.Model',alias:'model_hasilProduksi',fields:[{name:'id',type:'int'},{name:'pr_number',type:'string'},{name:'pr_date',type:'string'},{name:'pr_date_text',type:'string'},{name:'pr_memo',type:'string'},{name:'pr_status',type:'string'},{name:'pr_status_text',type:'string'},{name:'pr_to',type:'int'},{name:'pr_to_name',type:'string'}],proxy:{type:'ajax',url:appUrl+'inventory/hasilProduksi/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.inventory.model.model_hasilProduksiDetail',{extend:'Ext.data.Model',alias:'model_hasilProduksiDetail',fields:[{name:'id',type:'string'},{name:'pr_id',type:'string'},{name:'item_id',type:'string'},{name:'item_code',type:'string'},{name:'item_code_name',type:'string'},{name:'item_name',type:'string'},{name:'item_price',type:'string'},{name:'item_hpp',type:'string'},{name:'item_hpp_show',type:'string'},{name:'prd_qty',type:'string'},{name:'prd_status',type:'string'},{name:'unit_name',type:'string'},{name:'unit_id',type:'string'},{name:'nomor',type:'int'}],proxy:{type:'ajax',url:appUrl+'inventory/hasilProduksi/gridDataDetail',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_masterItemDistribution',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterItemDistribution',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterUnit',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterUnit',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterStoreHouse',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterStoreHouse',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.inventory.store.store_hasilProduksi',{extend:'Ext.data.Store',model:'ExtApp.modules.inventory.model.model_hasilProduksi',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.inventory.store.store_hasilProduksiDetail',{extend:'Ext.data.Store',model:'ExtApp.modules.inventory.model.model_hasilProduksiDetail',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.inventory.view.hasilProduksi",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_hasilProduksi_grid=theApp.getStore('store_hasilProduksi_grid',false);if(store_hasilProduksi_grid==false){store_hasilProduksi_grid=theApp.copyStore('inventory','store_hasilProduksi','store_hasilProduksi_grid');}
store_hasilProduksi_grid.proxy.extraParams.not_cancel=true;var helperGrid=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var selModel_hasilProduksi=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_hasilProduksi').down('#deleteButton_hasilProduksi').setDisabled(selections.length==0);}}});me.pagingtb_hasilProduksi=helperGrid.paging({ds:store_hasilProduksi_grid,title:' Production/Hasil Produksi'});return desktop.createWindow({id:me.id,title:'Production/Hasil Produksi',width:850,height:500,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:false,border:0,layout:{type:'border'},items:[{xtype:'form',title:'Filter',width:330,region:'west',id:'form_filter_hasilProduksi',split:true,collapsible:true,splitterResize:false,collapseMode:'mini',animCollapse:true,scroll:false,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'textfield',name:'keywords',labelWidth:60,labelSeparator:'',emptyText:'Keywords: NO',anchor:'100%',margin:'0 0 15 0',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_hasilProduksi();}}}},{xtype:'panel',border:0,layout:{type:'column'},margin:'0 0 15 0',items:[{xtype:'datefield',fieldLabel:'Date From',name:'date_from',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 0',labelWidth:65,width:170,value:phpJs.date('d-m-Y'),allowBlank:false},{xtype:'datefield',fieldLabel:' To ',name:'date_till',labelSeparator:'',format:'d-m-Y',altFormats:'Y-m-d|d-m-Y|dmY|Ymd',margin:'5 0 0 10',labelWidth:20,width:125,value:phpJs.date('d-m-Y'),allowBlank:false}]},{xtype:'container',style:'text-align:right',border:0,items:[{xtype:'button',text:'Search',scale:'medium',margin:'15 0 0 0',itemId:'btnFilterSearch_hasilProduksi',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_hasilProduksi();}},{xtype:'button',text:'Reset',scale:'medium',margin:'15 60 0 10',itemId:'btnFilterReset_hasilProduksi',tooltip:'Reset',iconCls:'btn-reset',handler:function(){var form=Ext.getCmp('form_filter_hasilProduksi').getForm();form.reset();form.findField('keywords').setValue('');form.findField('date_from').setValue(phpJs.date('01-m-Y'));form.findField('date_till').setValue(phpJs.date('t-m-Y'));me.search_hasilProduksi();}}]}]},{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_hasilProduksi_grid,id:'grid_hasilProduksi',scroll:true,selModel:selModel_hasilProduksi,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'pr_number',text:'NO',width:100},{xtype:'datecolumn',dataIndex:'pr_date',text:'Date',width:100,format:'d-m-Y'},{xtype:'gridcolumn',dataIndex:'pr_to_name',text:'Warehouse',width:200},{xtype:'gridcolumn',dataIndex:'pr_status_text',text:'Status',width:80},{xtype:'gridcolumn',dataIndex:'pr_memo',text:'Memo',width:200}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_hasilProduksi').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_hasilProduksi');}}},bbar:me.pagingtb_hasilProduksi,dockedItems:[{xtype:'toolbar',dock:'top',items:[{text:'Filter',itemId:'filterButton_hasilProduksi',tooltip:'Filter Production/Hasil Produksi',iconCls:'btn-search',listeners:{click:function(){Ext.getCmp('form_filter_hasilProduksi').toggleCollapse();}}},'->',{text:'Add',itemId:'addButton_hasilProduksi',tooltip:'Add Production/Hasil Produksi',iconCls:'btn-add',listeners:{click:function(){me.formType='add';me.edit_data=[];me.createWindow(me,'add_hasilProduksi');}}},'-',{text:'Cancel',itemId:'deleteButton_hasilProduksi',tooltip:'Cancel Production/Hasil Produksi',iconCls:'btn-delete',disabled:true,listeners:{click:function(){var getSelection=Ext.getCmp('grid_hasilProduksi').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;if(me.delete_data.pr_status=='take'||me.delete_data.pr_status=='validated'){ExtApp.Msg.warning('Cannot Cancel '+me.delete_data.pr_number+'<br/> Production/Hasil Produksi been taken / used');}else{me.deleteConfirm_hasilProduksi();}}else{ExtApp.Msg.info('Please Select Production/Hasil Produksi!');}}}},'-',{text:'Refresh',itemId:'refreshButton_hasilProduksi',tooltip:'Refresh Production/Hasil Produksi',iconCls:'btn-refresh',listeners:{click:function(){me.search_hasilProduksi();}}}]}]}],listeners:{boxready:function(){Ext.getCmp('form_filter_hasilProduksi').toggleCollapse();me.search_hasilProduksi();},show:function(){}}});},add_hasilProduksi:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add New Production/Hasil Produksi';if(me.formType=='edit'){Titletext='Update Production/Hasil Produksi';}
me.store_hasilProduksiDetailTemp=theApp.getStore('store_hasilProduksiDetailTemp',false);if(me.store_hasilProduksiDetailTemp==false){me.store_hasilProduksiDetailTemp=theApp.copyStore('inventory','store_hasilProduksiDetail','store_hasilProduksiDetailTemp');}
me.store_hasilProduksiDetailTemp.proxy.extraParams.limit=999999;var store_masterItem_hasilProduksiDetail=theApp.getStore('store_masterItem_hasilProduksiDetail',false);if(store_masterItem_hasilProduksiDetail==false){store_masterItem_hasilProduksiDetail=theApp.copyStore('master_pos','store_masterItemDistribution','store_masterItem_hasilProduksiDetail');}
store_masterItem_hasilProduksiDetail.proxy.extraParams.supplier_id=0;store_masterItem_hasilProduksiDetail.proxy.extraParams.item_id=0;store_masterItem_hasilProduksiDetail.proxy.extraParams.skip_date=1;store_masterItem_hasilProduksiDetail.proxy.extraParams.limit=999999;store_masterItem_hasilProduksiDetail.proxy.extraParams.is_last_stock=0;store_masterItem_hasilProduksiDetail.proxy.extraParams.is_dropdown=1;store_masterItem_hasilProduksiDetail.proxy.extraParams.storehouse_id=0;store_masterItem_hasilProduksiDetail.proxy.extraParams.from_module='production';store_masterItem_hasilProduksiDetail.proxy.extraParams.keywords='';var store_ComboboxMasterStoreHouse_hasilProduksi=theApp.getStore('store_ComboboxMasterStoreHouse_hasilProduksi',false);if(store_ComboboxMasterStoreHouse_hasilProduksi==false){store_ComboboxMasterStoreHouse_hasilProduksi=theApp.copyStore('master_pos','store_masterStoreHouse','store_ComboboxMasterStoreHouse_hasilProduksi');}
store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.limit=999999;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.is_dropdown=1;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.except_primary=1;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.is_active=1;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.show_all_text=0;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.show_choose_text=1;store_ComboboxMasterStoreHouse_hasilProduksi.proxy.extraParams.keywords='';var helperGridDetail=theApp.getHelper('Grid');var phpJs=theApp.getHelper('phpJs');var selModel_hasilProduksiDetail=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_hasilProduksiDetail').down('#deleteButton_hasilProduksiDetail').setDisabled(selections.length==0);}}});return desktop.createWindow({id:me.id+'_add_hasilProduksi',title:Titletext,width:745,height:500,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:true,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'panel',height:490,margin:'0 0 10 0',border:false,items:[{xtype:'form',id:'form_hasilProduksi',border:0,bodyPadding:10,border:true,margin:'0 0 0 0',items:[{xtype:'hidden',name:'form_type_hasilProduksi',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'fieldcontainer',layout:{type:'column'},fieldLabel:'',items:[{xtype:'textfield',name:'pr_number',fieldLabel:'NO',labelWidth:90,width:250,disabled:true,value:'auto',allowBlank:false},{xtype:'datefield',name:'pr_date',margin:'3 5 0 250',labelWidth:60,width:200,fieldLabel:'Date',format:'d-m-Y',submitFormat:'Y-m-d',allowBlank:false}]},{xtype:'hidden',name:'pr_to'},{xtype:'fieldcontainer',layout:{type:'column'},fieldLabel:'',items:[{xtype:'combobox',name:'pr_to_name',fieldLabel:'Kirim Ke',emptyText:'Pilih Gudang',labelWidth:90,width:350,store:store_ComboboxMasterStoreHouse_hasilProduksi,displayField:'storehouse_name',valueField:'id',queryMode:'local',allowBlank:false,margin:'0 50 0 0',listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_hasilProduksi').getForm();form2.findField('pr_to').setValue(records[0].data.id);form2.findField('pr_to_name').setValue(records[0].data.storehouse_name);var myMask=new Ext.LoadMask(Ext.getCmp('add_item_id_hasilProduksiDetail'),{msg:"Load Item..."});myMask.show();store_masterItem_hasilProduksiDetail.proxy.extraParams.storehouse_id=records[0].data.id;store_masterItem_hasilProduksiDetail.load({callback:function(){myMask.hide();}});}}},{xtype:'radiogroup',fieldLabel:'Status',labelWidth:70,width:300,items:[{xtype:'radiofield',boxLabel:'Progress',name:'pr_status',inputValue:'progress',id:'pr_progress'},{xtype:'radiofield',boxLabel:'Done/Selesai',name:'pr_status',inputValue:'done',id:'pr_done'}]}]},{xtype:'hidden',name:'pr_status_old'},{xtype:'textfield',name:'pr_memo',fieldLabel:'Memo',labelWidth:90,width:350,allowBlank:true}]},{xtype:'form',border:true,id:'form_hasilProduksiDetail',bodyBorder:false,bodyPadding:10,title:'',pollForChanges:false,layout:{type:'auto'},items:[{xtype:'panel',layout:{type:'hbox',align:'left'},margin:'0 0 10 0',border:false,items:[{xtype:'hidden',name:'form_type_hasilProduksiDetail',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'hidden',name:'pr_id'},{xtype:'hidden',name:'prd_status'},{xtype:'hidden',name:'item_id'},{xtype:'hidden',name:'unit_id'},{xtype:'hidden',name:'item_name'},{xtype:'hidden',name:'item_code'},{xtype:'combobox',name:'item_code_name',id:'add_item_id_hasilProduksiDetail',fieldLabel:'Items',hideLabel:true,emptyText:'-Select Items-',width:230,style:'margin-right:5px',allowBlank:false,store:store_masterItem_hasilProduksiDetail,displayField:'item_code_name',valueField:'id',hideTrigger:true,queryMode:'local',anyMatch:true,listeners:{select:function(combo,records,eOpts){var form=Ext.getCmp('form_hasilProduksi').getForm();var form2=Ext.getCmp('form_hasilProduksiDetail').getForm();form2.findField('pr_id').setValue(form.findField('id').getValue());form2.findField('item_id').setValue(records[0].data.id);form2.findField('item_name').setValue(records[0].data.item_name);form2.findField('item_code').setValue(records[0].data.item_code);form2.findField('item_code_name').setValue(records[0].data.item_code_name);form2.findField('unit_id').setValue(records[0].data.unit_id);form2.findField('unit_name').setValue(records[0].data.unit_name);form2.findField('unit_name_show').setValue(records[0].data.unit_name);form2.findField('item_hpp').setValue(records[0].data.item_hpp);},specialkey:function(field,e){var form2=Ext.getCmp('form_hasilProduksiDetail').getForm();if(e.getKey()==e.ENTER){form2.findField('item_hpp').focus();}}}},{xtype:'textfield',name:'item_hpp',fieldLabel:'',emptyText:'-HPP-',hideLabel:true,style:'margin-right:5px',width:120,allowBlank:false,listeners:{specialkey:function(field,e){var form2=Ext.getCmp('form_hasilProduksiDetail').getForm();if(e.getKey()==e.ENTER){form2.findField('prd_qty').focus();}}}},{xtype:'numberfield',name:'prd_qty',fieldLabel:'Qty',emptyText:'-Qty-',hideLabel:true,style:'margin-right:5px',width:80,minValue:0,allowDecimals:true,allowBlank:false,hideTrigger:true,keyNavEnabled:false,mouseWheelEnabled:false},{xtype:'displayfield',name:'unit_name_show',fieldLabel:'Unit',hideLabel:true,emptyText:'-Unit Name-',value:'-',width:90,style:'margin-right:5px',readOnly:true,allowBlank:true},{xtype:'hidden',name:'unit_name',fieldLabel:'Unit',hideLabel:true,emptyText:'-Unit Name-',width:110,style:'margin-right:5px',readOnly:true,allowBlank:true},{xtype:'button',iconCls:'btn-add',name:'btnAdd_hasilProduksiDetail',id:'btnAdd_hasilProduksiDetail',width:70,text:'Add',margin:'0 10 0 10',handler:function(){me.add_hasilProduksiDetail();}},{xtype:'button',iconCls:'btn-reset',name:'btnReset_hasilProduksiDetail',id:'btnReset_hasilProduksiDetail',width:70,text:'Reset',handler:function(){me.reset_hasilProduksiDetail();}}]},{xtype:'panel',margin:'0 0 0 0',layout:'table',border:false,items:[{xtype:'gridpanel',store:me.store_hasilProduksiDetailTemp,id:'grid_hasilProduksiDetail',selModel:selModel_hasilProduksiDetail,scroll:true,width:710,height:250,border:true,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'Detail ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'item_id',text:'Supply ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'item_hpp',text:'HPP',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'item_code_name',text:'Price',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'item_hpp',text:'item_hpp',hidden:true,hideable:false},{xtype:'gridcolumn',width:120,dataIndex:'item_code',text:'Item Code',sortable:false},{xtype:'gridcolumn',width:150,dataIndex:'item_name',text:'Item Name',sortable:false},{xtype:'gridcolumn',width:85,dataIndex:'prd_qty',text:'Qty',sortable:false},{xtype:'gridcolumn',width:120,dataIndex:'unit_name',text:'Unit',sortable:false},{xtype:'gridcolumn',width:120,dataIndex:'item_hpp_show',text:'HPP',sortable:false},],listeners:{itemdblclick:function(view,rec,item,index,eventObj){if(!me.edit_data){}else{if(me.edit_data.pr_status=='done'){ExtApp.Msg.warning('Cannot Edit Item, Change Status Production/Hasil Produksi to Progress and Save!');return true;}}
var form=Ext.getCmp('form_hasilProduksiDetail').getForm();form.reset();me.data_hasilProduksiDetail=rec.data;form.setValues(me.data_hasilProduksiDetail);form.findField('add_item_id_hasilProduksiDetail').setValue(me.data_hasilProduksiDetail.item_code_name);form.findField('form_type_hasilProduksiDetail').setValue('edit');form.findField('unit_name_show').setValue(me.data_hasilProduksiDetail.unit_name);Ext.getCmp('btnAdd_hasilProduksiDetail').setText('Edit');}},dockedItems:[{xtype:'toolbar',dock:'top',items:['->',{text:'Delete',itemId:'deleteButton_hasilProduksiDetail',tooltip:'Delete Production/Hasil Produksi Detail',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_hasilProduksiDetail').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;if(me.delete_data.prd_status==1){ExtApp.Msg.info('Cannot Delete Item!, Please Change Status Usage/ Production');}else{me.deleteConfirm_hasilProduksiDetail();}}else{ExtApp.Msg.info('Please select the data to be deleted!');}}},]}]}]}]}]}],buttons:[{text:'Print',formBind:true,id:'btnPrint_hasilProduksi',iconCls:'btn-print',disabled:true,handler:function(){me.print_hasilProduksi();}},'->',{text:'Save',formBind:true,id:'btnSave_hasilProduksi',iconCls:'btn-save',handler:function(){me.save_hasilProduksi();}},{text:'Close',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_hasilProduksi');}}],listeners:{show:function(){var form=Ext.getCmp('form_hasilProduksi').getForm();var formD=Ext.getCmp('form_hasilProduksiDetail').getForm();var pr_id=-1;var rowguid=0;form.reset();Ext.getCmp('btnSave_hasilProduksi').setDisabled(false);form.findField('pr_date').setDisabled(false);form.findField('pr_to_name').setDisabled(false);if(form.findField('form_type_hasilProduksi').getValue()=='add'){form.findField('pr_date').setValue(phpJs.date("d-m-Y"));Ext.getCmp('btnPrint_hasilProduksi').setDisabled(true);me.store_hasilProduksiDetailTemp.proxy.extraParams.pr_id=pr_id;me.store_hasilProduksiDetailTemp.loadData([]);store_ComboboxMasterStoreHouse_hasilProduksi.load();var myMask=new Ext.LoadMask(Ext.getCmp('add_item_id_hasilProduksiDetail'),{msg:"Loading..."});myMask.show();store_masterItem_hasilProduksiDetail.load({callback:function(){myMask.hide();}});Ext.getCmp('pr_progress').setValue(true);Ext.getCmp('pr_done').setValue(false);}else{form.setValues(me.edit_data);Ext.getCmp('btnPrint_hasilProduksi').setDisabled(false);var pr_id=me.edit_data.id;formD.findField('pr_id').setValue(pr_id);store_ComboboxMasterStoreHouse_hasilProduksi.load();var myMask=new Ext.LoadMask(Ext.getCmp('add_item_id_hasilProduksiDetail'),{msg:"Loading..."});myMask.show();store_masterItem_hasilProduksiDetail.proxy.extraParams.storehouse_id=me.edit_data.pr_to;store_masterItem_hasilProduksiDetail.load({callback:function(){myMask.hide();}});Ext.getCmp('btnAdd_hasilProduksiDetail').setDisabled(false);if(me.edit_data.pr_status=='done'){Ext.getCmp('btnAdd_hasilProduksiDetail').setDisabled(true);}
var myMask2=new Ext.LoadMask(Ext.getCmp('grid_hasilProduksiDetail'),{msg:"Loading..."});myMask2.show();me.store_hasilProduksiDetailTemp.proxy.extraParams.pr_id=pr_id;me.store_hasilProduksiDetailTemp.proxy.extraParams.limit=99999;me.store_hasilProduksiDetailTemp.load({callback:function(){myMask2.hide();}});if(me.edit_data.pr_status=='done'){form.findField('pr_date').setDisabled(true);form.findField('pr_to_name').setDisabled(true);}
if(me.edit_data.pr_status=='done'){Ext.getCmp('pr_progress').setValue(false);Ext.getCmp('pr_done').setValue(true);Ext.getCmp('btnPrint_hasilProduksi').setDisabled(false);}else{Ext.getCmp('pr_progress').setValue(true);Ext.getCmp('pr_done').setValue(false);Ext.getCmp('btnPrint_hasilProduksi').setDisabled(true);}}
me.reset_hasilProduksiDetail()}}});}});